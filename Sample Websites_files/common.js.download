define("localize",[],function(){function a(a){return a.replace(/^\s+|\s+$/g,"")}function b(b,c){var d=a(b).split(/\s+/),e=d[0];if(typeof c[e]=="function")return c[e].call(c,d,c)}function c(a,b){return b[a]}function d(b,c){return b.replace(/{([^}]*)}/g,function(b,d){return e.localize(a(d),c)})}var e={localize:function(e,f){if(typeof location!="undefined"&&location.search&&location.search.indexOf("notranslate=1")>0)return e;var g=c(e,f);return typeof g!="undefined"?d(String(g),f):(g=b(e,f),g?d(g,f):(this.logMissingLocalization(e,f),g=e,g))},logMissingLocalization:function(b,c){typeof console!="undefined"&&console.warn&&console.warn("No localized string for",b,c.name),typeof mpq!="undefined"&&mpq.push&&mpq.push(["track","localizationMissing",{key:b,locale:c.name}])}};return e}),define("locale",["localize"],function(a){function b(a,b){function c(){}c.prototype=a;var d=new c;for(var e in b)d[e]=b[e];return d}function e(a,e){typeof e=="undefined"&&(e=1),d[a]=b(c,{pluralType:""+e,name:a})}function f(a){typeof console!="undefined"&&console.warn&&console.warn("No such locale",a),typeof mpq!="undefined"&&mpq.push&&mpq.push(["track","localeMissing",{locale:a}])}var c={name:"base",pluralize:function(b,c){var d=a.localize(b[2],c),e=c.pluralTypes[c.pluralType](d),f=b[1]+"."+e;return a.localize(f,c)},pluralTypes:{1:function(a){return a=="1"?"1":"other"},2:function(a){return a=="0"||a=="1"?"1":"other"}},formatDate:function(a,b){var c=b[a[1]];c=new Date(c);if(c instanceof Date){var d=c.getDate(),e=c.getMonth()+1,f=c.getFullYear();return e+"/"+d+"/"+f}return""}},d={};return e("da-DK",1),e("de-DE",1),e("en-GB",1),e("en-AU",1),e("en-US",1),e("es-ES",1),e("es-MX",1),e("es-US",1),e("fr-CA",2),e("fr-FR",2),e("it-IT",1),e("nb-NO",1),e("nl-NL",1),e("sv-SE",1),e("zz-ZZ",1),function(a){var e=d[a];return e?e:(f(a),b(c,{}))}}),define("translate",["localize","locale","jquery"],function(a,b,c){function m(a,b){function c(){}c.prototype=a;var d=new c;for(var e in b)d[e]=b[e];return d}if(typeof window!="undefined"&&window.parent&&window.parent!==window)try{return window.parent.require("translate")}catch(d){}var e={},f=typeof webs!="undefined"&&webs.locale||"en-US",g,h=b(f),i="none";g="/s/resources/"+f+"/",typeof webs!="undefined"&&webs.props&&webs.props.dynamicAssetServer&&(g=webs.props.dynamicAssetServer+g);var j=function(a){var b=a.split(".");for(var c=0;c<b.length;c++){var d=e[b.slice(0,c+1).join(".")];if(d)return d}return!1},k=function(a){var b=j(a);if(b)return b;var d=g+a+"/",f=c.Deferred(),h=f.promise();return require([d+"?callback=define"],function(a){l(a),f.resolve(a)}),e[a]=h,h},l=function(a){for(var b in a)a.hasOwnProperty(b)&&(h[b]=a[b])},n=function(b,c){var d=m(h,c);return a.localize(b,d)};try{require.s.contexts._.specified.prefetchTranslationNamespaces&&require(["prefetchTranslationNamespaces"],function(a){c.each(a,function(a,b){k(b)})})}catch(d){}return{load:function(a,b,c,d){a=String(a).toString(),d.isBuild?c():a===i?c(n):k(a).then(function(){c(n)})},translate:n,add:l}}),function(a){typeof define=="function"&&define.amd?define("jquery.placeholder",["jquery"],a):a(jQuery)}(function(a){function b(b){var c=b.attr("placeholder");if(b.attr("type")==="password")try{b.attr("type","text"),b.on("focus",function(a){b.attr("type","password")}),b.on("blur",function(d){(b.val()===c||a.trim(b.val()).length<1)&&b.attr("type","text")})}catch(d){}b.val()===""?(b.val(c),b.addClass("placeholder")):b.data("changed",!0),b.focus(function(a){if(b.data("changed")===!0)return;b.val()===c&&(b.val(""),b.removeClass("placeholder"))}).blur(function(a){b.val()===""&&(b.val(c),b.addClass("placeholder"))}).change(function(a){b.data("changed",b.val()!==""),b.val()!==c&&b.removeClass("placeholder")})}a.fn.placeholder=function(){this.each(function(c,d){b(a(d))})}}),define("external/js/constants",[],function(){return{mobileWidth:767,mobileHeaderWidth:function(){return this.mobileWidth+180},rValidWebsId:/^([a-zA-Z0-9_\.\-])+@([a-zA-Z0-9_\.\-])+\.([a-zA-Z])+([a-zA-Z])+/,isSafeAscii:function(a){for(var b=0;b<a.length;b++)if(a.charCodeAt(b)<32||a.charCodeAt(b)>127)return!1;return!0}}}),define("external/js/signin",["jquery","external/js/constants","translate!webs.external.index.signup","jquery.placeholder"],function(a,b,c){var d,e,f,g,h,i,j,k=!1,l=function(a){return a.length<4?c("webs.external.index.signup.password.invalid.short"):a[0]===" "||a[a.length-1]===" "?c("webs.external.index.signup.password.invalid.space"):b.isSafeAscii(a)?!1:c("webs.external.index.signup.password.invalid.ascii")},m=function(a){return b.rValidWebsId.test(a)||a.length>3&&b.isSafeAscii(a)&&a.indexOf("@")===-1},n=function(){var a=m(g.val());return a},o=function(){var a=h.val(),b=l(a),c=!b;return b!=h.attr("errorMessage")&&(p(h,!c&&b),h.attr("errorMessage",b)),!b},p=function(a,b){b&&a.siblings("#password-input-error").text(b)},q=function(){return n()&&o()?(f.attr("action",f.attr("data-action")),f.submit(),!1):(t(),s(),!1)},r=function(a){a==="hide"?i.fadeOut():i.fadeIn()},s=function(){n()?o()?u():r("password"):r("email")},t=function(){g.bind("keyup.error",s),h.bind("keyup.error",s),j.addClass("webs-ext-btn-disabled").bind("click.error",function(){return!1})},u=function(){g.unbind(".error"),h.unbind(".error"),j.unbind(".error").removeClass("webs-ext-btn-disabled"),r("hide")},v=function(){if(k&&a("html").width()>b.mobileHeaderWidth()||!k&&a("html").width()<=b.mobileHeaderWidth())u(),g.off(),h.off(),j.off(),a("body").off(".login"),d.off(),a(window).off(".login"),x(),z()},w=function(){a("body").trigger("signin:activated"),d.addClass("active"),a("#webs-header-content").addClass("signin-active"),k?(d.slideUp(),e.slideDown().addClass("active")):(e.fadeIn().addClass("active"),g.trigger("focus")),a(window).trigger("resize")},x=function(){a("body").trigger("signin:deactivated"),d.removeClass("active"),a("#webs-header-content").removeClass("signin-active"),k?(d.slideDown({duration:400,start:function(){d.css("display","")}}),e.slideUp().removeClass("active")):e.fadeOut().removeClass("active"),u()},y=function(){d.hasClass("active")?x():w()},z=function(){a("html").hasClass("lt-ie10")&&a("#sign-in form input[placeholder]").placeholder(),k=a("html").width()<=b.mobileHeaderWidth(),d=a("#sign-in > .webs-ext-btn"),e=a("#sign-in .dropdown"),f=e.find("form"),g=f.find('input[type="email"]'),h=f.find('input[type="password"]'),i=f.find(".login-error"),j=f.find(".submit"),g.on("change",n),h.on("change",o),j.click(q),a("body").on("touchend.login click.login",function(b){var c=a(b.target),f=c.attr("id");e.find(c).length===0&&e.filter(c).length===0&&d.hasClass("active")&&x()}),d.on("click",function(a){a.preventDefault(),a.stopImmediatePropagation(),y()}),a(window).on("resize.login",v).trigger("resize")};return{init:z}}),function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},b=[].slice;(function(a,b){return typeof define=="function"&&define.amd?define("waypoints",["jquery"],function(c){return b(c,a)}):b(a.jQuery,a)})(this,function(c,d){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,u,v;return f=c(d),m=a.call(d,"ontouchstart")>=0,i={horizontal:{},vertical:{}},j=1,l={},k="waypoints-context-id",p="resize.waypoints",q="scroll.waypoints",r=1,s="waypoints-waypoint-ids",u="waypoint",v="waypoints",g=function(){function a(a){var b=this;this.$element=a,this.element=a[0],this.didResize=!1,this.didScroll=!1,this.id="context"+j++,this.oldScroll={x:a.scrollLeft(),y:a.scrollTop()},this.waypoints={horizontal:{},vertical:{}},this.element[k]=this.id,l[this.id]=this,a.bind(q,function(){var a;if(!b.didScroll&&!m)return b.didScroll=!0,a=function(){return b.doScroll(),b.didScroll=!1},d.setTimeout(a,c[v].settings.scrollThrottle)}),a.bind(p,function(){var a;if(!b.didResize)return b.didResize=!0,a=function(){return c[v]("refresh"),b.didResize=!1},d.setTimeout(a,c[v].settings.resizeThrottle)})}return a.prototype.doScroll=function(){var a,b=this;return a={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},m&&(!a.vertical.oldScroll||!a.vertical.newScroll)&&c[v]("refresh"),c.each(a,function(a,d){var f,g,h;return h=[],g=d.newScroll>d.oldScroll,f=g?d.forward:d.backward,c.each(b.waypoints[a],function(a,b){var c,e;if(d.oldScroll<(c=b.offset)&&c<=d.newScroll)return h.push(b);if(d.newScroll<(e=b.offset)&&e<=d.oldScroll)return h.push(b)}),h.sort(function(a,b){return a.offset-b.offset}),g||h.reverse(),c.each(h,function(a,b){if(b.options.continuous||a===h.length-1)return b.trigger([f])})}),this.oldScroll={x:a.horizontal.newScroll,y:a.vertical.newScroll}},a.prototype.refresh=function(){var a,b,d,e=this;return d=c.isWindow(this.element),b=this.$element.offset(),this.doScroll(),a={horizontal:{contextOffset:d?0:b.left,contextScroll:d?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:d?0:b.top,contextScroll:d?0:this.oldScroll.y,contextDimension:d?c[v]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},c.each(a,function(a,b){return c.each(e.waypoints[a],function(a,d){var e,f,g,h,i;e=d.options.offset,g=d.offset,f=c.isWindow(d.element)?0:d.$element.offset()[b.offsetProp],c.isFunction(e)?e=e.apply(d.element):typeof e=="string"&&(e=parseFloat(e),d.options.offset.indexOf("%")>-1&&(e=Math.ceil(b.contextDimension*e/100))),d.offset=f-b.contextOffset+b.contextScroll-e;if(d.options.onlyOnScroll&&g!=null||!d.enabled)return;if(g!==null&&g<(h=b.oldScroll)&&h<=d.offset)return d.trigger([b.backward]);if(g!==null&&g>(i=b.oldScroll)&&i>=d.offset)return d.trigger([b.forward]);if(g===null&&b.oldScroll>=d.offset)return d.trigger([b.forward])})})},a.prototype.checkEmpty=function(){if(c.isEmptyObject(this.waypoints.horizontal)&&c.isEmptyObject(this.waypoints.vertical))return this.$element.unbind([p,q].join(" ")),delete l[this.id]},a}(),h=function(){function a(a,b,d){var e,f;d=c.extend({},c.fn[u].defaults,d),d.offset==="bottom-in-view"&&(d.offset=function(){var a;return a=c[v]("viewportHeight"),c.isWindow(b.element)||(a=b.$element.height()),a-c(this).outerHeight()}),this.$element=a,this.element=a[0],this.axis=d.horizontal?"horizontal":"vertical",this.callback=d.handler,this.context=b,this.enabled=d.enabled,this.id="waypoints"+r++,this.offset=null,this.options=d,b.waypoints[this.axis][this.id]=this,i[this.axis][this.id]=this,e=(f=this.element[s])!=null?f:[],e.push(this.id),this.element[s]=e}return a.prototype.trigger=function(a){if(!this.enabled)return;this.callback!=null&&this.callback.apply(this.element,a);if(this.options.triggerOnce)return this.destroy()},a.prototype.disable=function(){return this.enabled=!1},a.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},a.prototype.destroy=function(){return delete i[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},a.getWaypointsByElement=function(a){var b,d;return d=a[s],d?(b=c.extend({},i.horizontal,i.vertical),c.map(d,function(a){return b[a]})):[]},a}(),o={init:function(a,b){var d;return b==null&&(b={}),(d=b.handler)==null&&(b.handler=a),this.each(function(){var a,d,f,i;return a=c(this),f=(i=b.context)!=null?i:c.fn[u].defaults.context,c.isWindow(f)||(f=a.closest(f)),f=c(f),d=l[f[0][k]],d||(d=new g(f)),new h(a,d,b)}),c[v]("refresh"),this},disable:function(){return o._invoke.call(this,"disable")},enable:function(){return o._invoke.call(this,"enable")},destroy:function(){return o._invoke.call(this,"destroy")},prev:function(a,b){return o._traverse.call(this,a,b,function(a,b,c){if(b>0)return a.push(c[b-1])})},next:function(a,b){return o._traverse.call(this,a,b,function(a,b,c){if(b<c.length-1)return a.push(c[b+1])})},_traverse:function(a,b,e){var f,g;return a==null&&(a="vertical"),b==null&&(b=d),g=n.aggregate(b),f=[],this.each(function(){var b;return b=c.inArray(this,g[a]),e(f,b,g[a])}),this.pushStack(f)},_invoke:function(a){return this.each(function(){var b;return b=h.getWaypointsByElement(this),c.each(b,function(b,c){return c[a](),!0})}),this}},c.fn[u]=function(){var a,d;return d=arguments[0],a=2<=arguments.length?b.call(arguments,1):[],o[d]?o[d].apply(this,a):c.isFunction(d)?o.init.apply(this,arguments):c.isPlainObject(d)?o.init.apply(this,[null,d]):d?c.error("The "+d+" method does not exist in jQuery Waypoints."):c.error("jQuery Waypoints needs a callback function or handler option.")},c.fn[u].defaults={context:d,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},n={refresh:function(){return c.each(l,function(a,b){return b.refresh()})},viewportHeight:function(){var a;return(a=d.innerHeight)!=null?a:f.height()},aggregate:function(a){var b,d,e;return b=i,a&&(b=(e=l[c(a)[0][k]])!=null?e.waypoints:void 0),b?(d={horizontal:[],vertical:[]},c.each(d,function(a,e){return c.each(b[a],function(a,b){return e.push(b)}),e.sort(function(a,b){return a.offset-b.offset}),d[a]=c.map(e,function(a){return a.element}),d[a]=c.unique(d[a])}),d):[]},above:function(a){return a==null&&(a=d),n._filter(a,"vertical",function(a,b){return b.offset<=a.oldScroll.y})},below:function(a){return a==null&&(a=d),n._filter(a,"vertical",function(a,b){return b.offset>a.oldScroll.y})},left:function(a){return a==null&&(a=d),n._filter(a,"horizontal",function(a,b){return b.offset<=a.oldScroll.x})},right:function(a){return a==null&&(a=d),n._filter(a,"horizontal",function(a,b){return b.offset>a.oldScroll.x})},enable:function(){return n._invoke("enable")},disable:function(){return n._invoke("disable")},destroy:function(){return n._invoke("destroy")},extendFn:function(a,b){return o[a]=b},_invoke:function(a){var b;return b=c.extend({},i.vertical,i.horizontal),c.each(b,function(b,c){return c[a](),!0})},_filter:function(a,b,d){var e,f;return e=l[c(a)[0][k]],e?(f=[],c.each(e.waypoints[b],function(a,b){if(d(e,b))return f.push(b)}),f.sort(function(a,b){return a.offset-b.offset}),c.map(f,function(a){return a.element})):[]}},c[v]=function(){var a,c;return c=arguments[0],a=2<=arguments.length?b.call(arguments,1):[],n[c]?n[c].apply(null,a):n.aggregate.call(null,c)},c[v].settings={resizeThrottle:100,scrollThrottle:30},f.load(function(){return c[v]("refresh")})})}.call(this),define("external/js/header",["jquery","external/js/signin","external/js/constants","waypoints"],function(a,b,c){var d,e,f,g,h,i,j,k=function(){i&&a(window).height()<j+e.outerHeight()&&h?f.css("height",a(window).height()-e.outerHeight()):f.css("height","auto"),d.width()<=c.mobileHeaderWidth()&&!i?(j=f.outerHeight(),f.hide(),i=!0):d.width()>c.mobileHeaderWidth()&&i&&(f.show(),i=!1)},l=function(){h||(i&&a(window).height()<j+e.outerHeight()&&f.css("height",a(window).height()-e.outerHeight()),d.removeClass("pending"),d.addClass("fixed activated"),h=!0)},m=function(){h&&(f.css("height","auto"),d.removeClass("activated fixed"),h=!1)},n=function(){d=a("#header-wrapper"),e=d.find("header#webs-header"),f=e.find("#webs-header-content"),g=a("#webs-wrapper"),h=!1,j=f.outerHeight(),a("html, body").waypoint(function(a){a==="down"?d.addClass("pending"):d.removeClass("pending")},{offset:-e.outerHeight()}),a("html, body").waypoint(function(a){a==="down"&&l()},{offset:-480}),a("html, body").waypoint(function(a){a==="up"&&m()},{offset:-1}),a("#webs-mobile-header-select").on("click",function(){i&&f.slideToggle()}),a(window).on("resize",k).resize(),a("body").on("click",function(b){if(i){var c=a(b.target),d=c.attr("id");f.find(c).length===0&&f.filter(c).length===0&&d!="webs-mobile-header-select"&&f.slideUp()}})};a(function(){n(),b.init(),a("#webs-wrapper .banner-image").removeClass("not-ready");if(a("html").hasClass("lt-ie9")){var c=a("ul.nth-child-list").children("li");for(var d=0;d<c.length;d++)a(c[d]).addClass("entry-"+(d+1))}})});var root=this;define("underscore",[],function(){var a=root._,b={},c=Array.prototype,d=Object.prototype,e=Function.prototype,f=c.push,g=c.slice,h=c.concat,i=c.unshift,j=d.toString,k=d.hasOwnProperty,l=c.forEach,m=c.map,n=c.reduce,o=c.reduceRight,p=c.filter,q=c.every,r=c.some,s=c.indexOf,t=c.lastIndexOf,u=Array.isArray,v=Object.keys,w=e.bind,x=function(a){if(a instanceof x)return a;if(!(this instanceof x))return new x(a);this._wrapped=a};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):root._=x,x.VERSION="1.4.2";var y=x.each=x.forEach=function(a,c,d){if(a==null)return;if(l&&a.forEach===l)a.forEach(c,d);else if(a.length===+a.length){for(var e=0,f=a.length;e<f;e++)if(c.call(d,a[e],e,a)===b)return}else for(var g in a)if(x.has(a,g)&&c.call(d,a[g],g,a)===b)return};x.map=x.collect=function(a,b,c){var d=[];return a==null?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)},x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),arguments.length>2?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c},x.find=x.detect=function(a,b,c){var d;return z(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0}),d},x.filter=x.select=function(a,b,c){var d=[];return a==null?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},x.reject=function(a,b,c){var d=[];return a==null?d:(y(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)}),d)},x.every=x.all=function(a,c,d){c||(c=x.identity);var e=!0;return a==null?e:q&&a.every===q?a.every(c,d):(y(a,function(a,f,g){if(!(e=e&&c.call(d,a,f,g)))return b}),!!e)};var z=x.some=x.any=function(a,c,d){c||(c=x.identity);var e=!1;return a==null?e:r&&a.some===r?a.some(c,d):(y(a,function(a,f,g){if(e||(e=c.call(d,a,f,g)))return b}),!!e)};x.contains=x.include=function(a,b){var c=!1;return a==null?c:s&&a.indexOf===s?a.indexOf(b)!=-1:(c=z(a,function(a){return a===b}),c)},x.invoke=function(a,b){var c=g.call(arguments,2);return x.map(a,function(a){return(x.isFunction(b)?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,function(a){return a[b]})},x.where=function(a,b){return x.isEmpty(b)?[]:x.filter(a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&x.isEmpty(a))return-Infinity;var d={computed:-Infinity};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&x.isEmpty(a))return Infinity;var d={computed:Infinity};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d};var A=function(a){return x.isFunction(a)?a:function(b){return b[a]}};x.sortBy=function(a,b,c){var d=A(b);return x.pluck(x.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||c===void 0)return 1;if(c<d||d===void 0)return-1}return a.index<b.index?-1:1}),"value")};var B=function(a,b,c,d){var e={},f=A(b);return y(a,function(b,g){var h=f.call(c,b,g,a);d(e,h,b)}),e};x.groupBy=function(a,b,c){return B(a,b,c,function(a,b,c){(x.has(a,b)?a[b]:a[b]=[]).push(c)})},x.countBy=function(a,b,c){return B(a,b,c,function(a,b,c){x.has(a,b)||(a[b]=0),a[b]++})},x.sortedIndex=function(a,b,c,d){c=c==null?x.identity:A(c);var e=c.call(d,b),f=0,g=a.length;while(f<g){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?a.length===+a.length?g.call(a):x.values(a):[]},x.size=function(a){return a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return b!=null&&!c?g.call(a,0,b):a[0]},x.initial=function(a,b,c){return g.call(a,0,a.length-(b==null||c?1:b))},x.last=function(a,b,c){return b!=null&&!c?g.call(a,Math.max(a.length-b,0)):a[a.length-1]},x.rest=x.tail=x.drop=function(a,b,c){return g.call(a,b==null||c?1:b)},x.compact=function(a){return x.filter(a,function(a){return!!a})};var C=function(a,b,c){return y(a,function(a){x.isArray(a)?b?f.apply(c,a):C(a,b,c):c.push(a)}),c};x.flatten=function(a,b){return C(a,b,[])},x.without=function(a){return x.difference(a,g.call(arguments,1))},x.uniq=x.unique=function(a,b,c,d){var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){if(b?!d||g[g.length-1]!==c:!x.contains(g,c))g.push(c),f.push(a[d])}),f},x.union=function(){return x.uniq(h.apply(c,arguments))},x.intersection=function(a){var b=g.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.indexOf(b,a)>=0})})},x.difference=function(a){var b=h.apply(c,g.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){var a=g.call(arguments),b=x.max(x.pluck(a,"length")),c=new Array(b);for(var d=0;d<b;d++)c[d]=x.pluck(a,""+d);return c},x.object=function(a,b){var c={};for(var d=0,e=a.length;d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(a==null)return-1;var d=0,e=a.length;if(c){if(typeof c!="number")return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=c<0?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;d<e;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(a==null)return-1;var d=c!=null;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);var e=d?c:a.length;while(e--)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);while(e<d)f[e++]=a,a+=c;return f};var D=function(){};x.bind=function(b,c){var d,e;if(b.bind===w&&w)return w.apply(b,g.call(arguments,1));if(!x.isFunction(b))throw new TypeError;return e=g.call(arguments,2),d=function(){if(this instanceof d){D.prototype=b.prototype;var a=new D,f=b.apply(a,e.concat(g.call(arguments)));return Object(f)===f?f:a}return b.apply(c,e.concat(g.call(arguments)))}},x.bindAll=function(a){var b=g.call(arguments,1);return b.length==0&&(b=x.functions(a)),y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(g.call(arguments,1)))},x.throttle=function(a,b){var c,d,e,f,g,h,i=x.debounce(function(){g=f=!1},b);return function(){c=this,d=arguments;var j=function(){e=null,g&&(h=a.apply(c,d)),i()};return e||(e=setTimeout(j,b)),f?g=!0:(f=!0,h=a.apply(c,d)),i(),h}},x.debounce=function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},x.once=function(a){var b=!1,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}},x.wrap=function(a,b){return function(){var c=[a];return f.apply(c,arguments),b.apply(this,c)}},x.compose=function(){var a=arguments;return function(){var b=arguments;for(var c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return a<=0?b():function(){if(--a<1)return b.apply(this,arguments)}},x.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)x.has(a,c)&&(b[b.length]=c);return b},x.values=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push(a[c]);return b},x.pairs=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push([c,a[c]]);return b},x.invert=function(a){var b={};for(var c in a)x.has(a,c)&&(b[a[c]]=c);return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(g.call(arguments,1),function(b){for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},d=h.apply(c,g.call(arguments,1));return y(d,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},d=h.apply(c,g.call(arguments,1));for(var e in a)x.contains(d,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(g.call(arguments,1),function(b){for(var c in b)a[c]==null&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var E=function(a,b,c,d){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return!1;var f=c.length;while(f--)if(c[f]==a)return d[f]==b;c.push(a),d.push(b);var g=0,h=!0;if(e=="[object Array]"){g=a.length,h=g==b.length;if(h)while(g--)if(!(h=E(a[g],b[g],c,d)))break}else{var i=a.constructor,k=b.constructor;if(i!==k&&!(x.isFunction(i)&&i instanceof i&&x.isFunction(k)&&k instanceof k))return!1;for(var l in a)if(x.has(a,l)){g++;if(!(h=x.has(b,l)&&E(a[l],b[l],c,d)))break}if(h){for(l in b)if(x.has(b,l)&&!(g--))break;h=!g}}return c.pop(),d.pop(),h};x.isEqual=function(a,b){return E(a,b,[],[])},x.isEmpty=function(a){if(a==null)return!0;if(x.isArray(a)||x.isString(a))return a.length===0;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!!a&&a.nodeType===1},x.isArray=u||function(a){return j.call(a)=="[object Array]"},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!!a&&!!x.has(a,"callee")}),typeof /./!="function"&&(x.isFunction=function(a){return typeof a=="function"}),x.isFinite=function(a){return x.isNumber(a)&&isFinite(a)},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return a===!0||a===!1||j.call(a)=="[object Boolean]"},x.isNull=function(a){return a===null},x.isUndefined=function(a){return a===void 0},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return root._=a,this},x.identity=function(a){return a},x.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)},x.random=function(a,b){return b==null&&(b=a,a=0),a+(0|Math.random()*(b-a+1))};var F={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};F.unescape=x.invert(F.escape);var G={escape:new RegExp("["+x.keys(F.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(F.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return b==null?"":(""+b).replace(G[a],function(b){return F[a][b]})}}),x.result=function(a,b){if(a==null)return null;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return f.apply(a,arguments),L.call(this,c.apply(x,a))}})};var H=0;x.uniqueId=function(a){var b=H++;return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,J={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},K=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){c=x.defaults({},c,x.templateSettings);var d=new RegExp([(c.escape||I).source,(c.interpolate||I).source,(c.evaluate||I).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){f+=a.slice(e,h).replace(K,function(a){return"\\"+J[a]}),f+=c?"'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?"'+\n((__t=("+d+"))==null?'':__t)+\n'":g?"';\n"+g+"\n__p+='":"",e=h+b.length}),f+="';\n",c.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(c.variable||"obj","_",f)}catch(h){throw h.source=f,h}if(b)return g(b,x);var i=function(a){return g.call(this,a,x)};return i.source="function("+(c.variable||"obj")+"){\n"+f+"}",i},x.chain=function(a){return x(a).chain()};var L=function(a){return this._chain?x(a).chain():a};return x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=c[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),(a=="shift"||a=="splice")&&c.length===0&&delete c[0],L.call(this,c)}}),y(["concat","join","slice"],function(a){var b=c[a];x.prototype[a]=function(){return L.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),x.noConflict()}),define("backbone",["jquery","underscore"],function(a,b){var c=window,d=c.Backbone,e=Array.prototype,f=e.push,g=e.slice,h=e.splice,i;typeof exports!="undefined"?i=exports:i=c.Backbone={},i.VERSION="0.9.2",i.$=a,i.noConflict=function(){return c.Backbone=d,this},i.emulateHTTP=!1,i.emulateJSON=!1;var j=/\s+/,k=i.Events={on:function(a,b,c){var d,e,f;if(!b)return this;a=a.split(j),d=this._callbacks||(this._callbacks={});while(e=a.shift())f=d[e]||(d[e]=[]),f.push(b,c);return this},off:function(a,c,d){var e,f,g,h;if(!(f=this._callbacks))return this;if(!(a||c||d))return delete this._callbacks,this;a=a?a.split(j):b.keys(f);while(e=a.shift()){if(!(g=f[e])||!c&&!d){delete f[e];continue}for(h=g.length-2;h>=0;h-=2)c&&g[h]!==c||d&&g[h+1]!==d||g.splice(h,2)}return this},trigger:function(a){var b,c,d,e,f,g,h,i;if(!(c=this._callbacks))return this;i=[],a=a.split(j);for(e=1,f=arguments.length;e<f;e++)i[e-1]=arguments[e];while(b=a.shift()){if(h=c.all)h=h.slice();if(d=c[b])d=d.slice();if(d)for(e=0,f=d.length;e<f;e+=2)d[e].apply(d[e+1]||this,i);if(h){g=[b].concat(i);for(e=0,f=h.length;e<f;e+=2)h[e].apply(h[e+1]||this,g)}}return this}};k.bind=k.on,k.unbind=k.off;var l=i.Model=function(a,c){var d,e=a||{};c&&c.collection&&(this.collection=c.collection),c&&c.parse&&(e=this.parse(e));if(d=b.result(this,"defaults"))e=b.extend({},d,e);this.attributes={},this._escapedAttributes={},this.cid=b.uniqueId("c"),this.changed={},this._changes={},this._pending={},this.set(e,{silent:!0}),this.changed={},this._changes={},this._pending={},this._previousAttributes=b.clone(this.attributes),this.initialize.apply(this,arguments)};b.extend(l.prototype,k,{changed:null,_changes:null,_pending:null,_changing:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return b.clone(this.attributes)},sync:function(){return i.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){var c;if(c=this._escapedAttributes[a])return c;var d=this.get(a);return this._escapedAttributes[a]=b.escape(d==null?"":""+d)},has:function(a){return this.get(a)!=null},set:function(a,c,d){var e,f;if(a==null)return this;b.isObject(a)?(f=a,d=c):(f={})[a]=c;var g=d&&d.silent,h=d&&d.unset;f instanceof l&&(f=f.attributes);if(h)for(e in f)f[e]=void 0;if(!this._validate(f,d))return!1;this.idAttribute in f&&(this.id=f[this.idAttribute]);var i=this._changing,j=this.attributes,k=this._escapedAttributes,m=this._previousAttributes||{};for(e in f){c=f[e];if(!b.isEqual(j[e],c)||h&&b.has(j,e))delete k[e],this._changes[e]=!0;h?delete j[e]:j[e]=c,!b.isEqual(m[e],c)||b.has(j,e)!==b.has(m,e)?(this.changed[e]=c,g||(this._pending[e]=!0)):(delete this.changed[e],delete this._pending[e],i||delete this._changes[e]),i&&b.isEqual(j[e],i[e])&&delete this._changes[e]}return g||this.change(d),this},unset:function(a,c){return c=b.extend({},c,{unset:!0}),this.set(a,null,c)},clear:function(a){return a=b.extend({},a,{unset:!0}),this.set(b.clone(this.attributes),a)},fetch:function(a){a=a?b.clone(a):{};var c=this,d=a.success;return a.success=function(b,e,f){if(!c.set(c.parse(b,f),a))return!1;d&&d(c,b,a)},this.sync("read",this,a)},save:function(a,c,d){var e,f,g;a==null||b.isObject(a)?(e=a,d=c):a!=null&&((e={})[a]=c),d=d?b.clone(d):{};if(d.wait){if(!this._validate(e,d))return!1;f=b.clone(this.attributes)}var h=b.extend({},d,{silent:!0});if(e&&!this.set(e,d.wait?h:d))return!1;if(!e&&!this._validate(null,d))return!1;var i=this,j=d.success;d.success=function(a,c,f){g=!0;var h=i.parse(a,f);d.wait&&(h=b.extend(e||{},h));if(!i.set(h,d))return!1;j&&j(i,a,d)};var k=this.sync(this.isNew()?"create":"update",this,d);return!g&&d.wait&&(this.clear(h),this.set(f,h)),k},destroy:function(a){a=a?b.clone(a):{};var c=this,d=a.success,e=function(){c.trigger("destroy",c,c.collection,a)};a.success=function(b){(a.wait||c.isNew())&&e(),d&&d(c,b,a)};if(this.isNew())return a.success(),!1;var f=this.sync("delete",this,a);return a.wait||e(),f},url:function(){var a=b.result(this,"urlRoot")||b.result(this.collection,"url")||E();return this.isNew()?a:a+(a.charAt(a.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},change:function(a){var c=this._changing,d=this._changing={};for(var e in this._changes)this._pending[e]=!0;var f=this._changes;this._changes={};var g=[];for(var e in f)d[e]=this.get(e),g.push(e);for(var h=0,i=g.length;h<i;h++)this.trigger("change:"+g[h],this,d[g[h]],a);if(c)return this;while(!b.isEmpty(this._pending)){this._pending={},this.trigger("change",this,a);for(var e in this.changed){if(this._pending[e]||this._changes[e])continue;delete this.changed[e]}this._previousAttributes=b.clone(this.attributes)}return this._changing=null,this},hasChanged:function(a){return a==null?!b.isEmpty(this.changed):b.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?b.clone(this.changed):!1;var c,d=!1,e=this._previousAttributes;for(var f in a){if(b.isEqual(e[f],c=a[f]))continue;(d||(d={}))[f]=c}return d},previous:function(a){return a==null||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return b.clone(this._previousAttributes)},isValid:function(a){return!this.validate||!this.validate(this.attributes,a)},_validate:function(a,c){if(c&&c.silent||!this.validate)return!0;a=b.extend({},this.attributes,a);var d=this.validate(a,c);return d?(c&&c.error&&c.error(this,d,c),this.trigger("error",this,d,c),!1):!0}});var m=i.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),b.comparator!==void 0&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&(b.parse&&(a=this.parse(a)),this.reset(a,{silent:!0,parse:b.parse}))};b.extend(m.prototype,k,{model:l,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return i.sync.apply(this,arguments)},add:function(a,c){var d,e,g,i,j,k=c&&c.at;a=b.isArray(a)?a.slice():[a];for(d=0,g=a.length;d<g;d++){if(a[d]=this._prepareModel(a[d],c))continue;throw new Error("Can't add an invalid model to a collection")}for(d=a.length-1;d>=0;d--){i=a[d],j=i.id!=null&&this._byId[i.id];if(j||this._byCid[i.cid]){c&&c.merge&&j&&j.set(i,c),a.splice(d,1);continue}i.on("all",this._onModelEvent,this),this._byCid[i.cid]=i,i.id!=null&&(this._byId[i.id]=i)}this.length+=a.length,e=[k!=null?k:this.models.length,0],f.apply(e,a),h.apply(this.models,e),this.comparator&&k==null&&this.sort({silent:!0});if(c&&c.silent)return this;while(i=a.shift())i.trigger("add",i,this,c);return this},remove:function(a,c){var d,e,f,g;c||(c={}),a=b.isArray(a)?a.slice():[a];for(d=0,e=a.length;d<e;d++){g=this.getByCid(a[d])||this.get(a[d]);if(!g)continue;delete this._byId[g.id],delete this._byCid[g.cid],f=this.indexOf(g),this.models.splice(f,1),this.length--,c.silent||(c.index=f,g.trigger("remove",g,this,c)),this._removeReference(g)}return this},push:function(a,b){return a=this._prepareModel(a,b),this.add(a,b),a},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,c){return a=this._prepareModel(a,c),this.add(a,b.extend({at:0},c)),a},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return a==null?void 0:this._byId[a.id!=null?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},where:function(a){return b.isEmpty(a)?[]:this.filter(function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return b.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(b.bind(this.comparator,this)),(!a||!a.silent)&&this.trigger("reset",this,a),this},pluck:function(a){return b.invoke(this.models,"get",a)},reset:function(a,c){for(var d=0,e=this.models.length;d<e;d++)this._removeReference(this.models[d]);return this._reset(),a&&this.add(a,b.extend({silent:!0},c)),(!c||!c.silent)&&this.trigger("reset",this,c),this},fetch:function(a){a=a?b.clone(a):{},a.parse===void 0&&(a.parse=!0);var c=this,d=a.success;return a.success=function(b,e,f){c[a.add?"add":"reset"](c.parse(b,f),a),d&&d(c,b,a)},this.sync("read",this,a)},create:function(a,c){var d=this;c=c?b.clone(c):{},a=this._prepareModel(a,c);if(!a)return!1;c.wait||d.add(a,c);var e=c.success;return c.success=function(a,b,c){c.wait&&d.add(a,c),e&&e(a,b,c)},a.save(null,c),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},chain:function(){return b(this.models).chain()},_reset:function(a){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(a,b){if(a instanceof l)return a.collection||(a.collection=this),a;b||(b={}),b.collection=this;var c=new this.model(a,b);return c._validate(c.attributes,b)?c:!1},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if((a==="add"||a==="remove")&&c!==this)return;a==="destroy"&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],b.id!=null&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments)}});var n=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortedIndex","toArray","size","first","head","take","initial","rest","tail","last","without","indexOf","shuffle","lastIndexOf","isEmpty"];b.each(n,function(a){m.prototype[a]=function(){var c=g.call(arguments);return c.unshift(this.models),b[a].apply(b,c)}});var o=["groupBy","countBy","sortBy"];b.each(o,function(a){m.prototype[a]=function(c,d){var e=b.isFunction(c)?c:function(a){return a.get(c)};return b[a](this.models,e,d)}});var p=i.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},q=/\((.*?)\)/g,r=/:\w+/g,s=/\*\w+/g,t=/[-{}[\]+?.,\\^$|#\s]/g;b.extend(p.prototype,k,{initialize:function(){},route:function(a,c,d){return b.isRegExp(a)||(a=this._routeToRegExp(a)),d||(d=this[c]),i.history.route(a,b.bind(function(b){var e=this._extractParameters(a,b);d&&d.apply(this,e),this.trigger.apply(this,["route:"+c].concat(e)),i.history.trigger("route",this,c,e)},this)),this},navigate:function(a,b){return i.history.navigate(a,b),this},_bindRoutes:function(){if(!this.routes)return;var a,c=b.keys(this.routes);while((a=c.pop())!=null)this.route(a,this.routes[a])},_routeToRegExp:function(a){return a=a.replace(t,"\\$&").replace(q,"(?:$1)?").replace(r,"([^/]+)").replace(s,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}});var u=i.History=function(){this.handlers=[],b.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},v=/^[#\/]/,w=/^\/+|\/+$/g,x=/msie [\w.]+/,y=/\/$/;u.started=!1,b.extend(u.prototype,k,{interval:50,getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(a==null)if(this._hasPushState||!this._wantsHashChange||b){a=this.location.pathname;var c=this.root.replace(y,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return decodeURIComponent(a.replace(v,""))},start:function(a){if(u.started)throw new Error("Backbone.history has already been started");u.started=!0,this.options=b.extend({},{root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var c=this.getFragment(),d=document.documentMode,e=x.exec(navigator.userAgent.toLowerCase())&&(!d||d<=7);this.root=("/"+this.root+"/").replace(w,"/"),e&&this._wantsHashChange&&(this.iframe=i.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(c)),this._hasPushState?i.$(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!e?i.$(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=c;var f=this.location,g=f.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!g)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&g&&f.hash&&(this.fragment=this.getHash().replace(v,""),this.history.replaceState({},document.title,this.root+this.fragment+f.search));if(!this.options.silent)return this.loadUrl()},stop:function(){i.$(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),u.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();b===this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe)));if(b===this.fragment)return!1;this.iframe&&this.navigate(b),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var c=this.fragment=this.getFragment(a),d=b.any(this.handlers,function(a){if(a.route.test(c))return a.callback(c),!0});return d},navigate:function(a,b){if(!u.started)return!1;if(!b||b===!0)b={trigger:b};a=this.getFragment(a||"");if(this.fragment===a)return;this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}b.trigger&&this.loadUrl(a)},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),i.history=new u;var z=i.View=function(a){this.cid=b.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},A=/^(\S+)\s*(.*)$/,B=["model","collection","el","id","attributes","className","tagName"];b.extend(z.prototype,k,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},dispose:function(){return this.undelegateEvents(),this.model&&this.model.off&&this.model.off(null,null,this),this.collection&&this.collection.off&&this.collection.off(null,null,this),this},remove:function(){return this.dispose(),this.$el.remove(),this},make:function(a,b,c){var d=document.createElement(a);return b&&i.$(d).attr(b),c!=null&&i.$(d).html(c),d},setElement:function(a,b){return this.$el&&this.undelegateEvents(),this.$el=a instanceof i.$?a:i.$(a),this.el=this.$el[0],b!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=b.result(this,"events")))return;this.undelegateEvents();for(var c in a){var d=a[c];b.isFunction(d)||(d=this[a[c]]);if(!d)throw new Error('Method "'+a[c]+'" does not exist');var e=c.match(A),f=e[1],g=e[2];d=b.bind(d,this),f+=".delegateEvents"+this.cid,g===""?this.$el.bind(f,d):this.$el.delegate(g,f,d)}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=b.extend({},this.options,a)),b.extend(this,b.pick(a,B)),this.options=a},_ensureElement:function(){if(!this.el){var a=b.extend({},b.result(this,"attributes"));this.id&&(a.id=b.result(this,"id")),this.className&&(a["class"]=b.result(this,"className")),this.setElement(this.make(b.result(this,"tagName"),a),!1)}else this.setElement(b.result(this,"el"),!1)}});var C={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};i.sync=function(a,c,d){var e=C[a];d||(d={});var f={type:e,dataType:"json"};d.url||(f.url=b.result(c,"url")||E()),!d.data&&c&&(a==="create"||a==="update")&&(f.contentType="application/json",f.data=JSON.stringify(c)),i.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{});if(i.emulateHTTP&&(e==="PUT"||e==="DELETE")){f.type="POST",i.emulateJSON&&(f.data._method=e);var g=d.beforeSend;d.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",e);if(g)return g.apply(this,arguments)}}f.type!=="GET"&&!i.emulateJSON&&(f.processData=!1);var h=d.success;d.success=function(a,b,e){h&&h(a,b,e),c.trigger("sync",c,a,d)};var j=d.error;return d.error=function(a,b,e){j&&j(c,a,d),c.trigger("error",c,a,d)},i.ajax(b.extend(f,d))},i.ajax=function(){return i.$.ajax.apply(i.$,arguments)};var D=function(a,c){var d=this,e;a&&b.has(a,"constructor")?e=a.constructor:e=function(){d.apply(this,arguments)},b.extend(e,d,c);var f=function(){this.constructor=e};return f.prototype=d.prototype,e.prototype=new f,a&&b.extend(e.prototype,a),e.__super__=d.prototype,e};l.extend=m.extend=p.extend=z.extend=u.extend=D;var E=function(){throw new Error('A "url" property or function must be specified')};return i}),function(a){typeof define=="function"&&define.amd?define("jquery.cssSelect",["jquery"],a):a(jQuery)}(function(a){a.fn.cssSelect=function(b){if(this.length===0)return;if(this.length>1)return this.each(function(){a(this).cssSelect()});var c=!1,d=this;d.addClass("hidden");var e={UP:38,DOWN:40,RETURN:13};b=a.extend({classRoot:"select name-"+d.attr("name"),liDecorator:function(){return""}},b);var f=a("<div><ul/></div>").addClass(b.classRoot);return a('<a class="selected" />').append(a("<span/>").addClass("text")).append(a("<span/>").addClass("handle")).prependTo(f),d.on("blur",function(a){c||f.removeClass("active")}),d.on("focus",function(a){f.addClass("active")}),d.on("change",function(a){var b=d.find("option:selected");b.is("[data-placeholder]")||f.removeClass("placeholder"),f.find(".text").text(b.text()),f.find("ul li").filter('[data-option-value="'+b.val()+'"]').addClass("selected")}),d.children("option").each(function(c,d){if(typeof a(d).data("placeholder")!="undefined")return!0;var e=a(d).text(),g=a("<li/>").html(b.liDecorator.call(this)).attr("data-option-value",a(d).val()).data("option",c).appendTo(f.find("ul"));a(b.liDecorator.call(this)).length&&g.find(a(b.liDecorator.call(this))[0].tagName).length>0?g.find(a(b.liDecorator.call(this))[0].tagName).text(e):g.text(e),f.find("li:first").addClass("hover")}),f.on("mousedown","li",function(b){b.preventDefault(),a(b.currentTarget).addClass("selected").siblings().removeClass("selected"),d[0].selectedIndex=a(this).data("option"),d.trigger("change"),f.removeClass("active")}),f.on("click",".selected",function(a){d.trigger("focus")}),f.on("mouseover","li",function(b){a(this).siblings().removeClass("hover"),a(this).addClass("hover")}),f.on("mouseenter",function(a){c=!0}),f.on("mouseleave",function(a){c=!1}),a(window).on("keydown",function(a){var b=f.hasClass("active");if(!b&&!d.is(":focus"))return;if(a.keyCode!==e.UP&&a.keyCode!==e.DOWN&&a.keyCode!==e.RETURN)return;b||f.addClass("active"),a.preventDefault();var c=f.find("li.hover");a.keyCode===e.UP&&c.prev().trigger("mouseover"),a.keyCode===e.DOWN&&c.next().trigger("mouseover"),a.keyCode===e.RETURN&&c.trigger("mousedown")}),a(window).on("mousedown",function(a){var b=f.hasClass("active");if(!b&&!d.is(":focus"))return;c||f.removeClass("active")}),d.find("option:selected").is("[data-placeholder]")&&f.addClass("placeholder"),f.find(".text").text(d.find("option:selected").text()),f.insertBefore(d),f}}),define("external/js/LocaleSelector",["jquery","underscore","backbone","translate!webs.external.locales.selector","jquery.cssSelect"],function(a,b,c,d){function e(b){return this.$localeList=a(b),this.initialize(),this}e.prototype={initialize:function(){var b=this.adaptLocaleList(this.$localeList);this.$localeList.addClass("hidden"),this.$localeList.each(function(c,d){var e=a(b);a(this).after(e),this.$localeSelect=new f({el:e}),this.$localeSelect.$cssSelect.insertAfter(this),this.$localeSelect.$el.trigger("change",{init:!0})})},adaptLocaleList:function(b){var c=b.data("name"),d=b.data("placeholder"),e=a();return b.first().find("li a").each(function(b,c){e=e.add(a("<option />").val(a(this).data("value")).attr("data-flag",a(this).data("flag")).attr("data-href",a(this).attr("href")).text(a(this).text()))}),a('<select name="locale" class="hidden" />').html(e)[0].outerHTML}};var f=c.View.extend({events:{change:"delegateToChangeEvents"},delegateToChangeEvents:function(a,b){this.cookieAndRedirect(a,b),this.updateSelectedFlag(a,b),this.abbreviateLanguage(a,b)},initialize:function(){this.$cssSelect=this.$el.cssSelect({liDecorator:this.decorateSelectView}).find("> .selected .text").addClass("flag-mini").end();var c=function(){return b.isUndefined(webs)||b.isUndefined(webs.locale)||webs.locale.length<1?"en-US":webs.locale}();this.$el.find("option").filter(function(b){return a(this).val()===c}).prop("selected","selected")},abbreviateLanguage:function(a,b){var c;this.$el.is("header#webs-header select")&&(a.stopImmediatePropagation(),c=this.$el.find(":selected").val().substring(0,2),this.$cssSelect.find(".selected .text").text(c))},decorateSelectView:function(){return a("<a/>").attr({href:a(this).data("href")}).addClass("flag flag-"+a(this).data("flag"))},updateSelectedFlag:function(a,b){a.preventDefault();var c=this.$el.find(":selected").data("flag");this.$cssSelect.find(".selected .text").attr({"data-flag":c})},cookieAndRedirect:function(a,c){a.preventDefault(),c=c||{};var d;if(c.init)return!0;d=window.location.hostname.split(".").slice(-2).join("."),document.cookie="locale="+this.$el.val()+"; expires="+this.getDatePlusMonthsCookie(1)+"; path=/; domain=."+d;if(b.isUndefined(window.mixpanel)||window.mixpanel&&b.isUndefined(window.mixpanel.track))return this.redirectToUrl();mixpanel.track("localeSelect",{language:this.$el.val()},b.bind(this.redirectToUrl,this))},redirectToUrl:function(){window.location=this.$cssSelect.find("ul .selected a").attr("href")},getDatePlusMonthsCookie:function(a){var b=new Date;return(new Date(b.setMonth(b.getMonth()+a))).toGMTString()}});return{ListAdapter:e,SelectView:f}}),define("external/js/common",["external/js/header","external/js/LocaleSelector"],function(a,b){new b.ListAdapter(".locales.select")})